# The Kitchen Metaphor

Understanding Prism Context Engine through the Kitchen/Recipe/Waiter model.


## The Core Metaphor

Prism Context Engine is best understood through a restaurant kitchen analogy:

| Concept | Prism Equivalent | Real-World Analogy |
|---------|------------------|-------------------|
| ğŸ³ **The Kitchen** | SaaS Dashboard | Where the chef creates recipes |
| ğŸ“œ **The Recipe** | Context Rules | Written instructions to follow |
| ğŸ½ï¸ **The Waiter** | MCP Protocol | Delivers recipes to the table |
| ğŸ‘¨â€ğŸ³ **The Chef** | You (Developer) | Creates and manages recipes |
| ğŸ§‘â€ğŸ³ **The Line Cook** | AI Assistant | Follows recipes to cook dishes |
| ğŸ½ï¸ **The Table** | Your IDE | Where the food (code) is served |

---

## The Kitchen (Dashboard)

The **Kitchen** is where all preparation happens â€” it's the Prism web dashboard at [prism.jeffdev.studio](https://prism.jeffdev.studio).

### What Happens in the Kitchen

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      THE KITCHEN                            â”‚
â”‚                   (Prism Dashboard)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“¹ Video Upload        ğŸ“ Rule Editor      ğŸ¨ Brand Setup  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Record yourself       Write and edit      Define design    â”‚
â”‚  explaining patterns   context rules       system tokens    â”‚
â”‚                                                             â”‚
â”‚  ğŸ¤– AI Extraction       ğŸ“‚ Organization     ğŸ‘¥ Team Sharing â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Azure OpenAI turns    Group rules by      Collaborate on  â”‚
â”‚  video into rules      project/category    shared recipes  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Kitchen Activities

| Activity | Description |
|----------|-------------|
| **Recipe Writing** | Manually write context rules in Markdown |
| **Recipe Extraction** | Upload video â†’ AI extracts rules automatically |
| **Mise en Place** | Organize rules by category, priority, tags |
| **Menu Planning** | Create brand profiles with design tokens |
| **Kitchen Staff** | Invite team members to collaborate |

---

## The Recipe (Context Rules)

**Recipes** are the actual instructions â€” your context rules that AI must follow.

### Anatomy of a Recipe

```markdown
# Component Architecture Rule

## Summary
All React components must follow the compound pattern for complex UI.

## Category
architecture

## Priority
1 (Critical)

## Tags
react, components, patterns

## The Rule

### Use Compound Components for Complex UI

When building components with multiple related parts (Modal, Dropdown, Tabs),
use the compound component pattern:

\`\`\`tsx
// âœ… Compound Pattern
<Modal>
  <Modal.Trigger>Open</Modal.Trigger>
  <Modal.Content>
    <Modal.Header>Title</Modal.Header>
    <Modal.Body>Content here</Modal.Body>
    <Modal.Footer>
      <Modal.Close>Cancel</Modal.Close>
    </Modal.Footer>
  </Modal.Content>
</Modal>

// âŒ Prop Drilling Anti-Pattern
<Modal
  trigger="Open"
  title="Title"
  content="Content here"
  footer={<button>Cancel</button>}
/>
\`\`\`

### Why?
- Better composition and flexibility
- Clearer component boundaries
- Easier to extend without breaking changes
```

### Recipe Formats

Prism exports recipes in multiple formats:

| Format | File | For |
|--------|------|-----|
| Cursor | `.cursorrules` | Cursor IDE |
| Windsurf | `.windsurfrules` | Windsurf IDE |
| Claude | `CLAUDE.md` | Claude Desktop |
| VS Code | MCP config | VS Code + MCP Extension |
| Raw | `.md` / `.json` | Manual use |

---

## The Waiter (MCP Protocol)

The **Waiter** is the delivery mechanism â€” the **Model Context Protocol (MCP)** that carries recipes from the kitchen to your IDE.

### How the Waiter Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   KITCHEN    â”‚                    â”‚    TABLE     â”‚
â”‚  (Dashboard) â”‚                    â”‚    (IDE)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                   â”‚
       â”‚  1. Chef updates recipe           â”‚
       â”‚                                   â”‚
       â–¼                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PRISM API   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ MCP SERVER   â”‚
â”‚  (Cloud)     â”‚  2. Waiter fetches â”‚ (Local)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     fresh recipes  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                    3. Waiter serves
                                       to line cook
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ AI ASSISTANT â”‚
                                    â”‚ (Line Cook)  â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Waiter Responsibilities

| Task | Description |
|------|-------------|
| **Fetch** | Get latest rules from Prism cloud |
| **Cache** | Store rules locally for speed |
| **Serve** | Deliver rules to AI via MCP protocol |
| **Refresh** | Update when rules change in dashboard |

### MCP Protocol Explained

MCP (Model Context Protocol) is an open standard that allows AI assistants to access external data sources. Prism implements an MCP server that:

1. **Connects** to your Prism account via API key
2. **Fetches** your project's context rules
3. **Serves** them to your IDE's AI assistant
4. **Updates** automatically when you change rules

<Callout type="info">
  **Analogy**: Think of MCP like a restaurant's POS system â€” orders (requests) go to the kitchen, and dishes (rules) come back to the table.
</Callout>

---

## The Complete Flow

Here's how all three components work together:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        YOUR WORKFLOW                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. RECORD          2. UPLOAD           3. EXTRACT              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚  "Our buttons       Video â†’ Mux         Azure OpenAI            â”‚
â”‚   use the Ghost     transcription       analyzes transcript     â”‚
â”‚   Glow pattern..."                      and generates rules     â”‚
â”‚                                                                 â”‚
â”‚                                                                 â”‚
â”‚  4. EDIT            5. DEPLOY           6. CODE                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€           â”€â”€â”€â”€â”€â”€â”€â”€â”€               â”‚
â”‚  Review and         MCP Server          Ask AI to create        â”‚
â”‚  refine rules       syncs rules         a button â€” it           â”‚
â”‚  in dashboard       to your IDE         follows your rules!     â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Why This Metaphor?

The Kitchen/Recipe/Waiter model helps you understand:

1. **Separation of Concerns**: The kitchen (rule creation) is separate from the table (IDE usage)
2. **Asynchronous Updates**: Recipes can be updated anytime; the waiter delivers fresh ones
3. **Scalability**: One kitchen can serve many tables (one dashboard, many projects/IDEs)
4. **Quality Control**: The chef (you) controls what the line cook (AI) produces

---

## Next Steps

- [MCP Protocol Deep Dive](/concepts/mcp-protocol) â€” Technical details of the "waiter"
- [Creating Rules](/rules/creating-rules) â€” Write effective "recipes"
- [Video Processing](/video/upload) â€” Automatic rule extraction
